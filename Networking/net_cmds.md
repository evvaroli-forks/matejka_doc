---
title: Networking Command Line
subtitle: Linux
---

Sammlung von Kommandozeilen Befehlen in Zusammenhang mit Netzwerk


# IP Adresse

**IP Adresse** ermitteln / Interface finden

```bash
$ ifconfig
$ ifconfig | grep inet
```

Neuere Linux Distributionen:

```bash
$ ip a
# oder
$ ip address
```

Folgendes ist noch nicht getestet.

IP Adresse ändern – von DHCP auf manuell. Wird nicht permanent gespeichert. [[*](https://devconnected.com/how-to-change-ip-address-on-linux/#Change_IP_Address_using_ifconfig)]

```bash
# CIDR notation
$ sudo ifconfig eth0 192.168.178.32/24
# oder netmask
$ sudo ifconfig eth0 192.168.178.32 netmask 255.255.255.0
```

Permanente Änderung in `/etc/network/interfaces`:

```bash
$ vim /etc/network/interfaces

# Content of /etc/network/interfaces

iface eth0 inet static
address 192.168.178.32
netmask 255.255.255.0
gateway 192.168.178.1
```

Restart networking service

```bash
# For systemd hosts
$ sudo systemctl restart networking.service

# For pre-systemd hosts
sudo /etc/init.d/networking restart
```

DHCP wieder aktivieren [[*]](https://docs.oracle.com/cd/E19683-01/806-4075/dhcp-overview-21/index.html):

```bash
$ ifconfig <interface> dhcp start
```





# DHCP

**DHCP** aktuelle Einstellungen (auch Linux?):

```bash
ipconfig getpacket en6
```

**DHCP** release/renew:

```bash
sudo ipconfig set en6 DHCP
```



# ARP

**ARP** chache anzeigen:

```bash
arp -n
```

**ARP** cache leeren:

```bash
ip -s -s neigh flush all
```



# DNS

**DNS** cache leeren:

```bash
sudo systemd-resolve --flush-caches
```

**DNS**:

```bash
$ nslookup orf.at
Server:		10.10.10.1
Address:	10.10.10.1#53

Non-authoritative answer:
Name:	orf.at
Address: 194.232.104.3
Name:	orf.at
Address: 194.232.104.4
Name:	orf.at
Address: 194.232.104.139
Name:	orf.at
Address: 194.232.104.140
Name:	orf.at
...
```

- Warum `Non-authoritative answer`?
- Warum mehrere IP Adressen?

**DNS Server** ermitteln

```bash
$ cat /etc/resolv.conf 
# Generated by resolvconf 
nameserver 192.168.1.1 
```



# MAC Adresse

Ändern der MAC Adresse:

```bash
# disable interface
$ ifconfig eth0 down
# change mac address
$ ifconfig eth0 hw ether 11:22:33:44:55:66
# enable interface
$ ifconfig eth0 up
```



# netstat – open Sockets

[[manpage : netstat](https://linux.die.net/man/8/netstat)]

Prüfen ob ein Serverprozess an einen Port **gebunden** ist:

```bash
$ netstat -tlpn | grep 80
# displays a list of open sockets
# -t ... TCP
# -l ... Show only listening sockets. 
# -p ... Show the PID and name of the program to which each socket belongs.
# -n ... Show numerical addresses instead of [...] symbolic host [...]
```

Übersicht über alle offenen Kommunikationskanäle (TCP und UDP):

```bash
$ netstat -tunap
# -t TCP
# -u UDP
# -n numerical addresses instead of symbolic host, port, user
# -a shows also listening sockets
# -p PID using this socket
```

Default gateway ermitteln (display the IP routing table )

```bash
$ netstat -r
# -r, Display the kernel routing tables.
Kernel IP routing table
Destination     Gateway         Genmask         Flags   MSS Window  irtt Iface
default         _gateway        0.0.0.0         UG        0 0          0 enp0s3
10.12.0.0       0.0.0.0         255.255.0.0     U         0 0          0 enp0s3
_gateway        0.0.0.0         255.255.255.255 UH        0 0          0 enp0s3
```



# macOS

ARP Cache leeren (MacOS)

```bash
arp -a -d
```

DNS cache leeren

```bash
sudo killall -HUP mDNSResponder
```

